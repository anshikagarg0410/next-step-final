<%- include('partials/dashboard_template', { title: "Your Personalized Career Dashboard" }) %>
<div class="main-header">
    <h1>Your Personalized Career Dashboard</h1>
    <p>Based on your assessment, here are AI-powered recommendations to guide your career journey.</p>
</div>

<div class="dashboard-grid">
    <div class="card career-matches">
        <h3>üìä Top Career Matches</h3>
        <p class="subtitle">Careers perfectly aligned with your strengths and interests</p>

        <% if(careerMatches && careerMatches.length > 0) { %>
            <% careerMatches.forEach((match, index) => { %>
                <% const [career, data] = match; %>
                
                <div class="job-item <%= (index >= 3) ? 'hidden-match' : '' %>">
                    <div class="job-info">
                        <h4><%= career %></h4>
                        <p><%= data.description %></p>
                        <div class="job-tags">
                            <% for(let tag of data.tags) { %>
                                <span class="tag"><%= tag %></span>
                            <% } %>
                        </div>
                    </div>
                    <div class="match-percentage">
                        <span class="match-badge"><%= data.score %>% match</span>
                    </div>
                </div>
            <% }); %>

            <% if (careerMatches.length > 3) { %>
                <button id="explore-matches-btn" class="explore-btn">Explore All Matches</button>
            <% } %>

        <% } else { %>
            <p>Please complete your <a href="/profile/user">profile</a> to see your personalized career matches!</p>
        <% } %>

    </div>



    <div class="right-column">
        <div class="card progress-overview">
            <h3>Progress Overview</h3>
            <div class="progress-item">
                <span>Assessment Completion</span>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 75%"></div>
                </div>
                <span>75%</span>
            </div>
            <div class="progress-item">
                <span>Skill Building</span>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 60%"></div>
                </div>
                <span>60%</span>
            </div>
            <div class="progress-item">
                <span>Career Exploration</span>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 80%"></div>
                </div>
                <span>80%</span>
            </div>
        </div>

        <div class="card internships">
            <h3>Internships</h3>
            <div class="internship-item">
                <div class="internship-info">
                    <h4>Frontend Developer Intern</h4>
                    <p>üìç San Francisco, CA ‚Ä¢ 3-5 months</p>
                    <span class="tag">Remote</span>
                </div>
                <span class="internship-badge">NEW</span>
            </div>
            <div class="internship-item">
                <div class="internship-info">
                    <h4>UX Research Intern</h4>
                    <p>üìç New York, NY ‚Ä¢ 3 months</p>
                    <span class="tag">Hybrid</span>
                </div>
                <span class="internship-badge">NEW</span>
            </div>
            <a href="/internships" class="view-all-btn">View All Internships</a>
        </div>
    </div>

    <div class="card courses-section">
        <div class="courses-header">
            <h3>üìö Recommended Courses</h3>
            <span class="subtitle">Build skills for your target careers</span>
        </div>
        <div class="courses-grid">
            <div class="course-item">
                <div class="course-info">
                    <h4>Python for Beginners</h4>
                    <div class="course-meta">
                        <span class="rating">‚≠ê 4.8</span>
                        <span>1550 enrolled</span>
                    </div>
                </div>
                <div class="price">FREE</div>
            </div>
            <div class="course-item">
                <div class="course-info">
                    <h4>UI/UX Design Fundamentals</h4>
                    <div class="course-meta">
                        <span class="rating">‚≠ê 4.9</span>
                        <span>980 enrolled</span>
                    </div>
                </div>
                <div class="price">$49</div>
            </div>
            <div class="course-item">
                <div class="course-info">
                    <h4>Data Analysis with R</h4>
                    <div class="course-meta">
                        <span class="rating">‚≠ê 4.7</span>
                        <span>750 enrolled</span>
                    </div>
                </div>
                <div class="price">$79</div>
            </div>
        </div>
    </div>
</div>

<div class="progress-dashboard">
    <h2>Your Progress Dashboard</h2>
    <p class="subtitle">Track your learning journey and celebrate your achievements</p>

    <div class="xp-card">
        <div class="level-info">
            <div class="level-number">4</div>
            <div>Current Level</div>
        </div>
        <div class="xp-info">
            <div class="xp-amount">3,500 XP</div>
            <div class="xp-label">Total Experience Points</div>
            <div class="level-progress">Progress to Level 5</div>
            <div class="level-bar">
                <div class="level-fill"></div>
            </div>
            <div>500 XP needed</div>
        </div>
        <div class="path-badge">
            <div>üéØ</div>
            <div>Data Scientist Path</div>
        </div>
    </div>

    <div class="tab-navigation">
        <button class="tab-btn active" onclick="switchTab('overview')">Overview</button>
        <button class="tab-btn" onclick="switchTab('achievements')">Achievements</button>
        <button class="tab-btn" onclick="switchTab('goals')">Goals</button>
        <button class="tab-btn" onclick="switchTab('activity')">Activity</button>
    </div>

    <div class="tab-content">
        <div id="overview" class="tab-panel active">
            <div class="bottom-grid">
                <div class="card skill-development">
                    <h3>Skill Development</h3>
                    <p class="subtitle">Your progress in key skills</p>
                    
                    <div class="skill-item">
                        <span class="skill-name">Python</span>
                        <div class="skill-bar">
                            <div class="skill-fill" style="width: 85%"></div>
                        </div>
                        <span class="skill-score">85/100</span>
                    </div>
                    <div class="skill-item">
                        <span class="skill-name">Statistics</span>
                        <div class="skill-bar">
                            <div class="skill-fill" style="width: 70%"></div>
                        </div>
                        <span class="skill-score">70/100</span>
                    </div>
                    <div class="skill-item">
                        <span class="skill-name">Machine Learning</span>
                        <div class="skill-bar">
                            <div class="skill-fill" style="width: 45%"></div>
                        </div>
                        <span class="skill-score">45/100</span>
                    </div>
                    <div class="skill-item">
                        <span class="skill-name">Data Visualization</span>
                        <div class="skill-bar">
                            <div class="skill-fill" style="width: 80%"></div>
                        </div>
                        <span class="skill-score">80/100</span>
                    </div>
                    <div class="skill-item">
                        <span class="skill-name">SQL</span>
                        <div class="skill-bar">
                            <div class="skill-fill" style="width: 75%"></div>
                        </div>
                        <span class="skill-score">75/100</span>
                    </div>
                    <div class="skill-item">
                        <span class="skill-name">R Programming</span>
                        <div class="skill-bar">
                            <div class="skill-fill" style="width: 25%"></div>
                        </div>
                        <span class="skill-score">25/100</span>
                    </div>
                </div>

                <div class="card">
                    <h3>Quick Stats</h3>
                    <div class="stats-grid">
                        <div class="stat-card purple">
                            <div class="stat-number">12</div>
                            <div class="stat-label">Courses Completed</div>
                        </div>
                        <div class="stat-card green">
                            <div class="stat-number">85%</div>
                            <div class="stat-label">Assessment Score</div>
                        </div>
                        <div class="stat-card orange">
                            <div class="stat-number">45</div>
                            <div class="stat-label">Study Days</div>
                        </div>
                        <div class="stat-card pink">
                            <div class="stat-number">7</div>
                            <div class="stat-label">Projects Built</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="achievements" class="tab-panel">
            <div class="achievements-grid">
                <div class="achievement-card earned">
                    <div class="achievement-icon">üêç</div>
                    <div class="achievement-content">
                        <h4>Python Master</h4>
                        <p>Completed Python fundamentals course</p>
                        <div class="achievement-meta">
                            <span class="xp-badge">+500 XP</span>
                            <span class="date">15/4/2025</span>
                        </div>
                    </div>
                </div>
                <div class="achievement-card earned">
                    <div class="achievement-icon">üìä</div>
                    <div class="achievement-content">
                        <h4>Data Visualization Expert</h4>
                        <p>Created 10 data visualizations</p>
                        <div class="achievement-meta">
                            <span class="xp-badge">+750 XP</span>
                            <span class="date">8/9/2024</span>
                        </div>
                    </div>
                </div>
                <div class="achievement-card earned">
                    <div class="achievement-icon">üî•</div>
                    <div class="achievement-content">
                        <h4>Learning Streak</h4>
                        <p>Learned for 30 consecutive days</p>
                        <div class="achievement-meta">
                            <span class="xp-badge">+1000 XP</span>
                            <span class="date">10/3/2024</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="goals" class="tab-panel">
            <div class="goals-list">
                <div class="goal-item-1">
                    <div class="goal-header">
                        <h4>Complete Machine Learning Course</h4>
                        <div class="goal-badges">
                            <span class="priority-badge high">Learning</span>
                            <span class="priority-badge medium">High priority</span>
                        </div>
                    </div>
                    <div class="goal-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 65%"></div>
                        </div>
                        <span class="progress-text">65%</span>
                    </div>
                    <p class="goal-target">Target: April 30, 2025</p>
                </div>

                <div class="goal-item-2">
                    <div class="goal-header">
                        <h4>Build 3 Portfolio Projects</h4>
                        <div class="goal-badges">
                            <span class="priority-badge projects">Projects</span>
                            <span class="priority-badge medium">Medium priority</span>
                        </div>
                    </div>
                    <div class="goal-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 33%"></div>
                        </div>
                        <span class="progress-text">33%</span>
                    </div>
                    <p class="goal-target">Target: Oct 15, 2024</p>
                </div>

                <div class="goal-item-3">
                    <div class="goal-header">
                        <h4>Apply to 10 Internships</h4>
                        <div class="goal-badges">
                            <span class="priority-badge applications">Applications</span>
                            <span class="priority-badge high">High priority</span>
                        </div>
                    </div>
                    <div class="goal-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 20%"></div>
                        </div>
                        <span class="progress-text">20%</span>
                    </div>
                    <p class="goal-target">Target: July 1, 2025</p>
                </div>
            </div>
        </div>

        <div id="activity" class="tab-panel">
            <div class="card activity-section">
                <h3>Recent Activity</h3>
                <p class="subtitle">Your latest learning milestones and achievements</p>
                
                <div class="activity-item">
                    <div class="activity-icon">‚úÖ</div>
                    <div class="activity-content">
                        <h4>Completed: Statistics Fundamentals - Module 3</h4>
                        <p>Hypothesis testing and confidence intervals</p>
                        <div class="activity-meta">
                            <span class="time">2 hours ago</span>
                            <span class="xp-badge">+150 XP</span>
                        </div>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon">üìã</div>
                    <div class="activity-content">
                        <h4>Submitted: Sales Data Analysis Project</h4>
                        <p>Data visualization and insights report</p>
                        <div class="activity-meta">
                            <span class="time">1 day ago</span>
                            <span class="xp-badge">+300 XP</span>
                        </div>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon">üîì</div>
                    <div class="activity-content">
                        <h4>New Skill Unlocked: Advanced SQL</h4>
                        <p>Window functions and complex queries</p>
                        <div class="activity-meta">
                            <span class="time">2 days ago</span>
                            <span class="xp-badge">+200 XP</span>
                        </div>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon">üìù</div>
                    <div class="activity-content">
                        <h4>Applied: Data Analyst Intern at TechCorp</h4>
                        <p>Application submitted with portfolio</p>
                        <div class="activity-meta">
                            <span class="time">3 days ago</span>
                            <span class="xp-badge">+100 XP</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
